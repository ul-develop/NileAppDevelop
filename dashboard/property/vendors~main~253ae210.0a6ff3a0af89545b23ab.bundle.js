(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{424:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n(0);function i(){var e=Object(s.useRef)(!0),t=Object(s.useRef)((function(){return e.current}));return Object(s.useEffect)((function(){return function(){e.current=!1}}),[]),t.current}},425:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n(0);function i(e){var t=Object(s.useRef)(null);return Object(s.useEffect)((function(){t.current=e})),t.current}},427:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=void 0===t?{}:t,s=n.propTypes,r=n.defaultProps,o=n.allowFallback,a=void 0!==o&&o,u=n.displayName,c=void 0===u?e.name||e.displayName:u,h=function(t,n){return e(t,n)};return Object.assign(i.default.forwardRef||!a?i.default.forwardRef(h):function(e){return h(e,null)},{displayName:c,propTypes:s,defaultProps:r})};var s,i=(s=n(0))&&s.__esModule?s:{default:s}},535:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n(0);function i(e){var t,n,i=(t=e,(n=Object(s.useRef)(t)).current=t,n);Object(s.useEffect)((function(){return function(){return i.current()}}),[])}},544:function(e,t,n){"use strict";(function(t){function n(e){i.length||(s(),!0),i[i.length]=e}e.exports=n;var s,i=[],r=0;function o(){for(;r<i.length;){var e=r;if(r+=1,i[e].call(),r>1024){for(var t=0,n=i.length-r;t<n;t++)i[t]=i[t+r];i.length-=r,r=0}}i.length=0,r=0,!1}var a,u,c,h=void 0!==t?t:self,l=h.MutationObserver||h.WebKitMutationObserver;function f(e){return function(){var t=setTimeout(s,0),n=setInterval(s,50);function s(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof l?(a=1,u=new l(o),c=document.createTextNode(""),u.observe(c,{characterData:!0}),s=function(){a=-a,c.data=a}):s=f(o),n.requestFlush=s,n.makeRequestCallFromTimer=f}).call(this,n(76))},65:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return F})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return q})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return Q})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return $}));
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var s,i=function(){function e(e){var t=e||{},n=t.ValidationData,s=t.Username,i=t.Password,r=t.AuthParameters,o=t.ClientMetadata;this.validationData=n||{},this.authParameters=r||{},this.clientMetadata=o||{},this.username=s,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),r=n(23),o=n(39),a=n.n(o),u=(n(245),n(123)),c=n.n(u),h=n(108),l=n.n(h),f=d;function d(e,t){null!=e&&this.fromString(e,t)}function g(){return new d(null)}var S="undefined"!=typeof navigator;S&&"Microsoft Internet Explorer"==navigator.appName?(d.prototype.am=function(e,t,n,s,i,r){for(var o=32767&t,a=t>>15;--r>=0;){var u=32767&this[e],c=this[e++]>>15,h=a*u+c*o;i=((u=o*u+((32767&h)<<15)+n[s]+(1073741823&i))>>>30)+(h>>>15)+a*c+(i>>>30),n[s++]=1073741823&u}return i},s=30):S&&"Netscape"!=navigator.appName?(d.prototype.am=function(e,t,n,s,i,r){for(;--r>=0;){var o=t*this[e++]+n[s]+i;i=Math.floor(o/67108864),n[s++]=67108863&o}return i},s=26):(d.prototype.am=function(e,t,n,s,i,r){for(var o=16383&t,a=t>>14;--r>=0;){var u=16383&this[e],c=this[e++]>>14,h=a*u+c*o;i=((u=o*u+((16383&h)<<14)+n[s]+i)>>28)+(h>>14)+a*c,n[s++]=268435455&u}return i},s=28),d.prototype.DB=s,d.prototype.DM=(1<<s)-1,d.prototype.DV=1<<s;d.prototype.FV=Math.pow(2,52),d.prototype.F1=52-s,d.prototype.F2=2*s-52;var p,v,m=new Array;for(p="0".charCodeAt(0),v=0;v<=9;++v)m[p++]=v;for(p="a".charCodeAt(0),v=10;v<36;++v)m[p++]=v;for(p="A".charCodeAt(0),v=10;v<36;++v)m[p++]=v;function C(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function U(e,t){var n=m[e.charCodeAt(t)];return null==n?-1:n}function A(e){var t=g();return t.fromInt(e),t}function D(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function T(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}T.prototype.convert=function(e){var t=g();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(d.ZERO)>0&&this.m.subTo(t,t),t},T.prototype.revert=function(e){var t=g();return e.copyTo(t),this.reduce(t),t},T.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],s=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,s,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},T.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},T.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},d.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},d.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},d.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var s=e.length,i=!1,r=0;--s>=0;){var o=U(e,s);o<0?"-"==e.charAt(s)&&(i=!0):(i=!1,0==r?this[this.t++]=o:r+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-r)-1)<<r,this[this.t++]=o>>this.DB-r):this[this.t-1]|=o<<r,(r+=n)>=this.DB&&(r-=this.DB))}this.clamp(),i&&d.ZERO.subTo(this,this)},d.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},d.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},d.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},d.prototype.lShiftTo=function(e,t){var n,s=e%this.DB,i=this.DB-s,r=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<s&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|a,a=(this[n]&r)<<s;for(n=o-1;n>=0;--n)t[n]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},d.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var s=e%this.DB,i=this.DB-s,r=(1<<s)-1;t[0]=this[n]>>s;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&r)<<i,t[o-n]=this[o]>>s;s>0&&(t[this.t-n-1]|=(this.s&r)<<i),t.t=this.t-n,t.clamp()}},d.prototype.subTo=function(e,t){for(var n=0,s=0,i=Math.min(e.t,this.t);n<i;)s+=this[n]-e[n],t[n++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s-=e.s;n<this.t;)s+=this[n],t[n++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;n<e.t;)s-=e[n],t[n++]=s&this.DM,s>>=this.DB;s-=e.s}t.s=s<0?-1:0,s<-1?t[n++]=this.DV+s:s>0&&(t[n++]=s),t.t=n,t.clamp()},d.prototype.multiplyTo=function(e,t){var n=this.abs(),s=e.abs(),i=n.t;for(t.t=i+s.t;--i>=0;)t[i]=0;for(i=0;i<s.t;++i)t[i+n.t]=n.am(0,s[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&d.ZERO.subTo(t,t)},d.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var s=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,s,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},d.prototype.divRemTo=function(e,t,n){var s=e.abs();if(!(s.t<=0)){var i=this.abs();if(i.t<s.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=g());var r=g(),o=this.s,a=e.s,u=this.DB-D(s[s.t-1]);u>0?(s.lShiftTo(u,r),i.lShiftTo(u,n)):(s.copyTo(r),i.copyTo(n));var c=r.t,h=r[c-1];if(0!=h){var l=h*(1<<this.F1)+(c>1?r[c-2]>>this.F2:0),f=this.FV/l,S=(1<<this.F1)/l,p=1<<this.F2,v=n.t,m=v-c,C=null==t?g():t;for(r.dlShiftTo(m,C),n.compareTo(C)>=0&&(n[n.t++]=1,n.subTo(C,n)),d.ONE.dlShiftTo(c,C),C.subTo(r,r);r.t<c;)r[r.t++]=0;for(;--m>=0;){var U=n[--v]==h?this.DM:Math.floor(n[v]*f+(n[v-1]+p)*S);if((n[v]+=r.am(0,U,n,m,0,c))<U)for(r.dlShiftTo(m,C),n.subTo(C,n);n[v]<--U;)n.subTo(C,n)}null!=t&&(n.drShiftTo(c,t),o!=a&&d.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&d.ZERO.subTo(n,n)}}},d.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},d.prototype.addTo=function(e,t){for(var n=0,s=0,i=Math.min(e.t,this.t);n<i;)s+=this[n]+e[n],t[n++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s+=e.s;n<this.t;)s+=this[n],t[n++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;n<e.t;)s+=e[n],t[n++]=s&this.DM,s>>=this.DB;s+=e.s}t.s=s<0?-1:0,s>0?t[n++]=s:s<-1&&(t[n++]=this.DV+s),t.t=n,t.clamp()},d.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,s=(1<<t)-1,i=!1,r="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,r=C(n));o>=0;)a<t?(n=(this[o]&(1<<a)-1)<<t-a,n|=this[--o]>>(a+=this.DB-t)):(n=this[o]>>(a-=t)&s,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(r+=C(n));return i?r:"0"},d.prototype.negate=function(){var e=g();return d.ZERO.subTo(this,e),e},d.prototype.abs=function(){return this.s<0?this.negate():this},d.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},d.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+D(this[this.t-1]^this.s&this.DM)},d.prototype.mod=function(e){var t=g();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(d.ZERO)>0&&e.subTo(t,t),t},d.prototype.equals=function(e){return 0==this.compareTo(e)},d.prototype.add=function(e){var t=g();return this.addTo(e,t),t},d.prototype.subtract=function(e){var t=g();return this.subTo(e,t),t},d.prototype.multiply=function(e){var t=g();return this.multiplyTo(e,t),t},d.prototype.divide=function(e){var t=g();return this.divRemTo(e,t,null),t},d.prototype.modPow=function(e,t,n){var s,i=e.bitLength(),r=A(1),o=new T(t);if(i<=0)return r;s=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=s-1,h=(1<<s)-1;if(a[1]=o.convert(this),s>1){var l=g();for(o.sqrTo(a[1],l);u<=h;)a[u]=g(),o.mulTo(l,a[u-2],a[u]),u+=2}var f,d,S=e.t-1,p=!0,v=g();for(i=D(e[S])-1;S>=0;){for(i>=c?f=e[S]>>i-c&h:(f=(e[S]&(1<<i+1)-1)<<c-i,S>0&&(f|=e[S-1]>>this.DB+i-c)),u=s;0==(1&f);)f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--S),p)a[f].copyTo(r),p=!1;else{for(;u>1;)o.sqrTo(r,v),o.sqrTo(v,r),u-=2;u>0?o.sqrTo(r,v):(d=r,r=v,v=d),o.mulTo(v,a[f],r)}for(;S>=0&&0==(e[S]&1<<i);)o.sqrTo(r,v),d=r,r=v,v=d,--i<0&&(i=this.DB-1,--S)}var m=o.revert(r);return n(null,m),m},d.ZERO=A(0),d.ONE=A(1);
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var y=function(e){return r.Buffer.from(a.a.lib.WordArray.random(e).toString(),"hex")},w=function(){function e(e){this.N=new f("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new f("2",16),this.k=new f(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=r.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,s){n&&e(n,null),t.largeAValue=s,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){var e=y(128).toString("hex");return new f(e,16).mod(this.N)},t.generateRandomString=function(){return y(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var s=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,r=this.hash(i),o=y(16).toString("hex");this.SaltToHashDevices=this.padHex(new f(o,16)),this.g.modPow(new f(this.hexHash(this.SaltToHashDevices+r),16),this.N,(function(e,t){e&&n(e,null),s.verifierDevices=s.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,s){e&&t(e,null),s.mod(n.N).equals(f.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,s)}))},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new f(this.UHexHash,16)},t.hash=function(e){var t=e instanceof r.Buffer?a.a.lib.WordArray.create(e):e,n=c()(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(r.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=a.a.lib.WordArray.create(r.Buffer.concat([this.infoBits,r.Buffer.from(String.fromCharCode(1),"utf8")])),s=e instanceof r.Buffer?a.a.lib.WordArray.create(e):e,i=t instanceof r.Buffer?a.a.lib.WordArray.create(t):t,o=l()(s,i),u=l()(n,o);return r.Buffer.from(u.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,s,i){var o=this;if(n.mod(this.N).equals(f.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(f.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+e+":"+t,u=this.hash(a),c=new f(this.hexHash(this.padHex(s)+u),16);this.calculateS(c,n,(function(e,t){e&&i(e,null);var n=o.computehkdf(r.Buffer.from(o.padHex(t),"hex"),r.Buffer.from(o.padHex(o.UValue.toString(16)),"hex"));i(null,n)}))},t.calculateS=function(e,t,n){var s=this;this.g.modPow(e,this.N,(function(i,r){i&&n(i,null),t.subtract(s.k.multiply(r)).modPow(s.smallAValue.add(s.UValue.multiply(e)),s.N,(function(e,t){e&&n(e,null),n(null,t.mod(s.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){var t=e.toString(16);return t.length%2==1?t="0"+t:-1!=="89ABCDEFabcdef".indexOf(t[0])&&(t="00"+t),t},e}(),I=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(r.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();var E=function(e){var t,n;function s(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,s}(I);
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var F=function(e){var t,n;function s(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,s}(I),k=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),R=n(124),P=n.n(R),b=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,s=t.RefreshToken,i=t.AccessToken,r=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=s,this.accessToken=i,this.clockDrift=void 0===r?this.calculateClockDrift():r}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],N=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=N[e.getUTCDay()],n=M[e.getUTCMonth()],s=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var r=e.getUTCMinutes();r<10&&(r="0"+r);var o=e.getUTCSeconds();return o<10&&(o="0"+o),t+" "+n+" "+s+" "+i+":"+r+":"+o+" UTC "+e.getUTCFullYear()},e}(),O=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,s=t.Value;this.Name=n||"",this.Value=s||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),x={},B=function(){function e(){}return e.setItem=function(e,t){return x[e]=t,x[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(x,e)?x[e]:void 0},e.removeItem=function(e){return delete x[e]},e.clear=function(){return x={}},e}(),V=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=B}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),K="undefined"!=typeof navigator?navigator.userAgent:"nodejs",q=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new V).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,s=e.getAuthParameters();s.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),r={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:i};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",r,(function(e,s){if(e)return t.onFailure(e);var i=s.ChallengeName,r=s.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=s.Session,t.customChallenge(r)):(n.signInUserSession=n.getCognitoUserSession(s.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,s,i=this,o=new w(this.pool.getUserPoolId().split("_")[1]),u=new _,c={};null!=this.deviceKey&&(c.DEVICE_KEY=this.deviceKey),c.USERNAME=this.username,o.getLargeAValue((function(h,d){h&&t.onFailure(h),c.SRP_A=d.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(c.CHALLENGE_NAME="SRP_A");var g=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),S={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:c,ClientMetadata:g};i.getUserContextData(i.username)&&(S.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",S,(function(c,h){if(c)return t.onFailure(c);var d=h.ChallengeParameters;i.username=d.USER_ID_FOR_SRP,n=new f(d.SRP_B,16),s=new f(d.SALT,16),i.getCachedDeviceKeyAndPassword(),o.getPasswordAuthenticationKey(i.username,e.getPassword(),n,s,(function(e,n){e&&t.onFailure(e);var s=u.getNowString(),c=a.a.lib.WordArray.create(r.Buffer.concat([r.Buffer.from(i.pool.getUserPoolId().split("_")[1],"utf8"),r.Buffer.from(i.username,"utf8"),r.Buffer.from(d.SECRET_BLOCK,"base64"),r.Buffer.from(s,"utf8")])),f=a.a.lib.WordArray.create(n),S=P.a.stringify(l()(c,f)),p={};p.USERNAME=i.username,p.PASSWORD_CLAIM_SECRET_BLOCK=d.SECRET_BLOCK,p.TIMESTAMP=s,p.PASSWORD_CLAIM_SIGNATURE=S,null!=i.deviceKey&&(p.DEVICE_KEY=i.deviceKey);var v={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:p,Session:h.Session,ClientMetadata:g};i.getUserContextData()&&(v.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,(function(s,r){return s&&"ResourceNotFoundException"===s.code&&-1!==s.message.toLowerCase().indexOf("device")?(p.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(s,r)}))}(v,(function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,o,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,s={};if(s.USERNAME=this.username,s.PASSWORD=e.getPassword(),s.PASSWORD){var i=new w(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey);var r=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:r};this.getUserContextData(this.username)&&(o.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",o,(function(e,s){return e?t.onFailure(e):n.authenticateUserInternal(s,i,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var s=this,i=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,o);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,o);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,o);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,o);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var a=null,u=null,c=[],h=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(a=JSON.parse(e.ChallengeParameters.userAttributes),u=JSON.parse(e.ChallengeParameters.requiredAttributes)),u)for(var l=0;l<u.length;l++)c[l]=u[l].substr(h.length);return n.newPasswordRequired(a,c)}if("DEVICE_SRP_AUTH"!==i){this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var f=e.AuthenticationResult.NewDeviceMetadata;if(null==f)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(i){if(i)return n.onFailure(i);var o={Salt:r.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:r.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=o.PasswordVerifier,s.deviceGroupKey=f.DeviceGroupKey,s.randomPassword=t.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:f.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:K},(function(t,i){return t?n.onFailure(t):(s.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(s.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(s.signInUserSession))}))}))}else this.getDeviceResponse(n)},t.completeNewPasswordChallenge=function(e,t,n,s){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var r=new w(this.pool.getUserPoolId().split("_")[1]),o=r.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach((function(e){a[o+e]=t[e]})),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)}))},t.getDeviceResponse=function(e,t){var n=this,s=new w(this.deviceGroupKey),i=new _,o={};o.USERNAME=this.username,o.DEVICE_KEY=this.deviceKey,s.getLargeAValue((function(u,c){u&&e.onFailure(u),o.SRP_A=c.toString(16);var h={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:o,ClientMetadata:t};n.getUserContextData()&&(h.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",h,(function(t,o){if(t)return e.onFailure(t);var u=o.ChallengeParameters,c=new f(u.SRP_B,16),h=new f(u.SALT,16);s.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,c,h,(function(t,s){if(t)return e.onFailure(t);var c=i.getNowString(),h=a.a.lib.WordArray.create(r.Buffer.concat([r.Buffer.from(n.deviceGroupKey,"utf8"),r.Buffer.from(n.deviceKey,"utf8"),r.Buffer.from(u.SECRET_BLOCK,"base64"),r.Buffer.from(c,"utf8")])),f=a.a.lib.WordArray.create(s),d=P.a.stringify(l()(h,f)),g={};g.USERNAME=n.username,g.PASSWORD_CLAIM_SECRET_BLOCK=u.SECRET_BLOCK,g.TIMESTAMP=c,g.PASSWORD_CLAIM_SIGNATURE=d,g.DEVICE_KEY=n.deviceKey;var S={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:g,Session:o.Session};n.getUserContextData()&&(S.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",S,(function(t,s){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(s.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,s){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:s};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var s=this,i={};i.USERNAME=this.username,i.ANSWER=e;var r=new w(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var o={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",o,(function(e,n){return e?t.onFailure(e):s.authenticateUserInternal(n,r,t)}))},t.sendMFACode=function(e,t,n,s){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var a=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===a&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var u={ChallengeName:a,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var s=new w(i.pool.getUserPoolId().split("_")[1]);s.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var o={Salt:r.Buffer.from(s.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:r.Buffer.from(s.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=o.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=s.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:K},(function(e,s){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===s.UserConfirmationNecessary?t.onSuccess(i.signInUserSession,s.UserConfirmationNecessary):t.onSuccess(i.signInUserSession))}))}))}else i.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,s){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){var s=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e){return e?t(e,null):s.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var s=[],i=0;i<n.UserAttributes.length;i++){var r={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},o=new O(r);s.push(o)}return e(null,s)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(){var e=this;return new Promise((function(t){var n=e.signInUserSession.getRefreshToken();n&&n.getToken()?e.refreshSession(n,t):t()}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var s=this.getUserDataFromCache();if(s)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then((function(e){return n.refreshSessionIfPossible().then((function(){return e}))})).then((function(t){return e(null,t)})).catch(e);else try{return void e(null,JSON.parse(s))}catch(t){return this.clearCachedUserData(),void e(t,null)}else this.fetchUserData().then((function(t){e(null,t)})).catch(e)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then((function(t){return e.cacheUserData(t),t}))},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",s=t+".accessToken",i=t+".refreshToken",r=t+".clockDrift";if(this.storage.getItem(n)){var o=new F({IdToken:this.storage.getItem(n)}),a=new E({AccessToken:this.storage.getItem(s)}),u=new k({RefreshToken:this.storage.getItem(i)}),c=parseInt(this.storage.getItem(r),0)||0,h=new b({IdToken:o,AccessToken:a,RefreshToken:u,ClockDrift:c});if(h.isValid())return this.signInUserSession=h,e(null,this.signInUserSession);if(!u.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(u,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var s=this,i={};i.REFRESH_TOKEN=e.getToken();var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=r+".LastAuthUser";if(this.storage.getItem(o)){this.username=this.storage.getItem(o);var a=r+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(a),i.DEVICE_KEY=this.deviceKey}var u={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:i,ClientMetadata:n};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",u,(function(n,i){if(n)return"NotAuthorizedException"===n.code&&s.clearCachedUser(),t(n,null);if(i){var r=i.AuthenticationResult;return Object.prototype.hasOwnProperty.call(r,"RefreshToken")||(r.RefreshToken=e.getToken()),s.signInUserSession=s.getCognitoUserSession(r),s.cacheTokens(),t(null,s.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",s=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",r=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(s,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(r,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",s=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(s,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",s=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(s))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",s=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(s)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",s=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",r=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(s),this.storage.removeItem(i),this.storage.removeItem(r)},t.getCognitoUserSession=function(e){var t=new F(e),n=new E(e),s=new k(e);return new b({IdToken:t,AccessToken:n,RefreshToken:s})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,s){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:s};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(e){return e?n.onFailure(e):n.onSuccess()}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess()}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var s={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(s.PaginationToken=t),this.client.request("ListDevices",s,(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(e,t){var n=this,s={};s.USERNAME=this.username,s.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(s,i){return s?t.onFailure(s):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0)}))},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,s){return n?e.onFailure(n):(t.Session=s.Session,e.associateSecretCode(s.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var s=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);s.Session=t.Session;var i={};i.USERNAME=s.username;var r={ChallengeName:"MFA_SETUP",ClientId:s.pool.getClientId(),ChallengeResponses:i,Session:s.Session};s.getUserContextData()&&(r.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",r,(function(e,t){return e?n.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),n.onSuccess(s.signInUserSession))}))}))},e}();
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */n(653);function H(){}H.prototype.userAgent="aws-amplify/0.1.x js";var W=H;function j(e){var t="function"==typeof Map?new Map:void 0;return(j=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,s)}function s(){return J(e,arguments,z(this).constructor)}return s.prototype=Object.create(e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),G(s,e)})(e)}function J(e,t,n){return(J=L()?Reflect.construct:function(e,t,n){var s=[null];s.push.apply(s,t);var i=new(Function.bind.apply(e,s));return n&&G(i,n.prototype),i}).apply(null,arguments)}function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){var t,n;function s(t,n,s,i){var r;return(r=e.call(this,t)||this).code=n,r.name=s,r.statusCode=i,r}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,s}(j(Error)),Z=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var s=(n||{}).credentials;this.fetchOptions=s?{credentials:s}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise((function(s,i){n.request(e,t,(function(e,t){e?i(new Y(e.message,e.code,e.name,e.statusCode)):s(t)}))}))},t.request=function(e,t,n){var s,i={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":W.prototype.userAgent},r=Object.assign({},this.fetchOptions,{headers:i,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,r).then((function(e){return s=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json().catch((function(){return{}}))})).then((function(e){if(s.ok)return n(null,e);e;var t=(e.__type||e.code).split("#").pop(),i={code:t,name:t,message:e.message||e.Message||null};return n(i)})).catch((function(e){if(!(s&&s.headers&&s.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return n(t)}return n(e)}try{var i=s.headers.get("x-amzn-errortype").split(":")[0],r={code:i,name:i,statusCode:s.status,message:s.status?s.status.toString():null};return n(r)}catch(t){return n(e)}}))},e}(),Q=function(){function e(e){var t=e||{},n=t.UserPoolId,s=t.ClientId,i=t.endpoint,r=t.fetchOptions,o=t.AdvancedSecurityDataCollectionFlag;if(!n||!s)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(n))throw new Error("Invalid UserPoolId format.");var a=n.split("_")[0];this.userPoolId=n,this.clientId=s,this.client=new Z(a,i,r),this.advancedSecurityDataCollectionFlag=!1!==o,this.storage=e.Storage||(new V).getStorage()}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,s,i,r){var o=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:s,ClientMetadata:r};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,(function(t,n){if(t)return i(t,null);var s={Username:e,Pool:o,Storage:o.storage},r={user:new q(s),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,r)}))},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new q(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),X=n(91),$=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),X.set(e,t,n),X.get(e)},t.getItem=function(e){return X.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),X.remove(e,t)},t.clear=function(){var e,t=X.get();for(e=0;e<t.length;++e)X.remove(t[e]);return{}},e}()},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(0);var i=function(e){var t=Object(s.useRef)(e);return Object(s.useEffect)((function(){t.current=e}),[e]),t};function r(e){var t=i(e);return Object(s.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}}}]);